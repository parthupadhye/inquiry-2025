# PROMPT 1.1.1: CLI Package and Commander.js Setup

## Context
Building the CLI for the Inquiry Framework schematics system. This is the foundation that all generators will use. The CLI will be named `inquiry` and allow developers to scaffold agents, workflows, and other components.

## Tech Stack
- Node.js 20+
- TypeScript 5.4+
- Commander.js 12+ (CLI framework)
- chalk 5+ (colors)
- ora 8+ (spinners)
- tsup (bundler)

## Package Location
`packages/inquiry-cli/`

## Requirements

### Package Structure
```
packages/inquiry-cli/
├── package.json
├── tsconfig.json
├── tsup.config.ts
├── bin/
│   └── inquiry.js
├── src/
│   ├── index.ts
│   └── commands/
│       ├── init.ts
│       └── generate.ts
└── README.md
```

### package.json
```json
{
  "name": "@inquiry/cli",
  "version": "0.1.0",
  "description": "CLI for Inquiry Framework schematics",
  "bin": {
    "inquiry": "./bin/inquiry.js"
  },
  "main": "./dist/index.js",
  "types": "./dist/index.d.ts",
  "scripts": {
    "build": "tsup",
    "dev": "tsup --watch",
    "typecheck": "tsc --noEmit"
  },
  "dependencies": {
    "commander": "^12.0.0",
    "chalk": "^5.3.0",
    "ora": "^8.0.0"
  },
  "devDependencies": {
    "typescript": "^5.4.0",
    "@types/node": "^20.0.0",
    "tsup": "^8.0.0"
  },
  "engines": {
    "node": ">=20.0.0"
  }
}
```

### tsconfig.json
```json
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "NodeNext",
    "moduleResolution": "NodeNext",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "outDir": "./dist",
    "rootDir": "./src",
    "declaration": true,
    "declarationMap": true
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist"]
}
```

### tsup.config.ts
```typescript
import { defineConfig } from 'tsup';

export default defineConfig({
  entry: ['src/index.ts'],
  format: ['esm'],
  dts: true,
  clean: true,
  sourcemap: true,
});
```

### bin/inquiry.js
```javascript
#!/usr/bin/env node
import('../dist/index.js');
```

### src/index.ts
Create the main CLI program with Commander.js:
- Program name: `inquiry`
- Description: "Inquiry Framework CLI - Generate agents, workflows, and more"
- Version: Read from package.json (use createRequire for ESM)
- Global options:
  - `--dry-run` - Preview changes without writing files
  - `--verbose` - Show detailed output
- Commands:
  - `init` - Initialize Inquiry workspace (call initCommand)
  - `generate` (alias: `g`) - Generate components (call generateCommand)
    - Argument: `<schematic>` - Type of component to generate
    - Argument: `[name]` - Name of the component
    - Option: `--type <type>` - Component subtype

### src/commands/init.ts
Export `initCommand` function:
- Use ora spinner: "Initializing Inquiry workspace..."
- Log with chalk.cyan: "This will set up:"
- List items with chalk.gray:
  - "/inquiry folder structure"
  - "inquiry.config.ts configuration"
  - "TypeScript path aliases"
- Log chalk.yellow: "Coming soon in feature 1.2.1"
- Stop spinner with success

### src/commands/generate.ts
Export `generateCommand` function:
- Parameters: schematic (string), name (string | undefined), options (object)
- Log with chalk.cyan: `Generating ${schematic}...`
- If name provided, log: `Name: ${name}`
- If options.type provided, log: `Type: ${options.type}`
- Log available schematics with chalk.gray:
  - agent - Generate an agent
  - node - Generate a Neo4j node type
  - workflow - Generate a workflow
  - contracts - Generate contract types
- Log chalk.yellow: "Coming soon in feature 3.2.1"

## Additional Requirements
- Use ESM (type: module in package.json)
- All imports must use .js extension for local files
- Handle chalk and ora as ESM imports
- Use `createRequire` from 'module' to read package.json for version

## Testing Instructions
After building:
```bash
# Build
cd packages/inquiry-cli
pnpm install
pnpm build

# Link globally
pnpm link --global

# Test commands
inquiry --help
inquiry --version
inquiry init
inquiry init --dry-run
inquiry g agent TestAgent
inquiry g agent TestAgent --type=extraction
inquiry g workflow ClaimVerification
```

## Expected Output

### inquiry --help
```
Usage: inquiry [options] [command]

Inquiry Framework CLI - Generate agents, workflows, and more

Options:
  -V, --version      output the version number
  --dry-run          Preview changes without writing files
  --verbose          Show detailed output
  -h, --help         display help for command

Commands:
  init [options]     Initialize Inquiry workspace
  generate|g <schematic> [name]  Generate components
  help [command]     display help for command
```

### inquiry init
```
⠋ Initializing Inquiry workspace...
This will set up:
  • /inquiry folder structure
  • inquiry.config.ts configuration  
  • TypeScript path aliases
Coming soon in feature 1.2.1
✔ Initializing Inquiry workspace...
```

### inquiry g agent TestAgent --type=extraction
```
Generating agent...
  Name: TestAgent
  Type: extraction

Available schematics:
  • agent     - Generate an agent
  • node      - Generate a Neo4j node type
  • workflow  - Generate a workflow
  • contracts - Generate contract types

Coming soon in feature 3.2.1
```

## Success Criteria
- [ ] Package created at packages/inquiry-cli/
- [ ] `pnpm build` succeeds without errors
- [ ] `inquiry --help` shows usage
- [ ] `inquiry --version` shows 0.1.0
- [ ] `inquiry init` shows stub message with spinner
- [ ] `inquiry g agent Test` shows stub message
- [ ] `inquiry g agent Test --type=extraction` shows type
- [ ] Can run locally via `pnpm link --global`
